---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: kiro2api
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword
  target:
    name: kiro2api-secret
    template:
      data:
        KIRO_AUTH_TOKEN: '[{"auth":"IdC","refreshToken":"{{ .KIRO_REFRESH_TOKEN }}","clientId":"{{ .KIRO_CLIENT_ID }}","clientSecret":"{{ .KIRO_CLIENT_SECRET }}"}]'
        KIRO_CLIENT_TOKEN: "{{ .KIRO_API_KEY }}"
  dataFrom:
    - extract:
        key: kiro2api
