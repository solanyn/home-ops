---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: gitlab-sync
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword
  target:
    name: gitlab-sync-secret
    template:
      data:
        GITLAB_URL: "https://{{ .GITLAB_MIRROR_HOST }}"
        GITLAB_TOKEN: "{{ .GITLAB_MIRROR_TOKEN }}"
        GITLAB_PROJECT_ID: "{{ .GITLAB_PROJECT_ID }}"
        FORGEJO_URL: "https://forgejo.goyangi.io"
        FORGEJO_TOKEN: "{{ .FORGEJO_TOKEN }}"
        FORGEJO_OWNER: "{{ .FORGEJO_OWNER }}"
        FORGEJO_REPO: "{{ .FORGEJO_REPO }}"
  dataFrom:
    - extract:
        key: gitlab-mirror
