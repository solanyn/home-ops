---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: health-import
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword
  target:
    name: health-import-secret
    template:
      data:
        config.json: |
          [
            {
              "type": "influxdb",
              "hostname": "http://influxdb.storage.svc.cluster.local:8086",
              "token": "{{ .HEALTH_IMPORT_INFLUXDB_TOKEN }}",
              "org": "{{ .HEALTH_IMPORT_INFLUXDB_ORG }}",
              "bucket": "{{ .HEALTH_IMPORT_INFLUXDB_BUCKET }}"
            }
          ]
  dataFrom:
    - extract:
        key: health-import
