# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/operator.victoriametrics.com/vmservicescrape_v1beta1.json
apiVersion: operator.victoriametrics.com/v1beta1
kind: VMServiceScrape
metadata:
  name: nas-node-exporter
spec:
  endpoints:
    - port: "9100"
      path: /metrics
      relabelConfigs:
        - action: replace
          targetLabel: job
          replacement: node-exporter
  selector: {}
  namespaceSelector:
    any: true
---
# For external targets, use VMStaticScrape instead
apiVersion: operator.victoriametrics.com/v1beta1
kind: VMStaticScrape
metadata:
  name: nas-external-targets
spec:
  jobName: nas-exporters
  targetEndpoints:
    - targets:
        - nas.internal:9100
      labels:
        job: node-exporter
    - targets:
        - nas.internal:9633
      labels:
        job: smartctl-exporter
