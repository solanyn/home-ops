---
apiVersion: agentgateway.dev/v1alpha1
kind: AgentgatewayBackend
metadata:
  name: moonshot-kimi
spec:
  ai:
    provider:
      openai:
        model: moonshot/kimi-k2.5
      host: api.moonshot.ai
      port: 443
  policies:
    auth:
      secretRef:
        name: moonshot-auth
    tls:
      sni: api.moonshot.ai
---
apiVersion: agentgateway.dev/v1alpha1
kind: AgentgatewayBackend
metadata:
  name: modal-gpt-oss-120b
spec:
  ai:
    provider:
      openai:
        model: openai/gpt-oss-120b
      host: solanyn--llm-gpt-oss-120b-sglang-serve.modal.run
      port: 443
  policies:
    auth:
      secretRef:
        name: modal-llm-auth
    tls:
      sni: solanyn--llm-gpt-oss-120b-sglang-serve.modal.run
---
apiVersion: agentgateway.dev/v1alpha1
kind: AgentgatewayBackend
metadata:
  name: modal-devstral-small-2-24b
spec:
  ai:
    provider:
      openai:
        model: mistralai/Devstral-Small-2-24B-Instruct-2512
      host: solanyn--llm-devstral-small-2-24b-sglang-serve.modal.run
      port: 443
  policies:
    auth:
      secretRef:
        name: modal-llm-auth
    tls:
      sni: solanyn--llm-devstral-small-2-24b-sglang-serve.modal.run
---
apiVersion: agentgateway.dev/v1alpha1
kind: AgentgatewayBackend
metadata:
  name: mlx-ministral-8b
spec:
  ai:
    provider:
      openai:
        model: mlx-community/Ministral-3-8B-Instruct-2512-4bit
      host: mac.internal
      port: 8080
---
apiVersion: agentgateway.dev/v1alpha1
kind: AgentgatewayBackend
metadata:
  name: mlx-whisper
spec:
  ai:
    provider:
      openai:
        model: whisper-small
      host: mac.internal
      port: 8081
---
apiVersion: agentgateway.dev/v1alpha1
kind: AgentgatewayBackend
metadata:
  name: opencode-llm
spec:
  ai:
    groups:
      - providers:
          - name: moonshot
            openai:
              model: moonshot/kimi-k2
            host: api.moonshot.ai
            port: 443
            policies:
              auth:
                secretRef:
                  name: moonshot-auth
              tls:
                sni: api.moonshot.ai
      - providers:
          - name: mlx-fallback
            openai:
              model: mlx-community/Ministral-3-8B-Instruct-2512-4bit
            host: mac.internal
            port: 8080
