---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: influxdb
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword
  target:
    name: influxdb-secret
    template:
      data:
        DOCKER_INFLUXDB_INIT_USERNAME: "{{ .INFLUXDB_ADMIN_USER }}"
        DOCKER_INFLUXDB_INIT_PASSWORD: "{{ .INFLUXDB_ADMIN_PASSWORD }}"
        DOCKER_INFLUXDB_INIT_ORG: "{{ .INFLUXDB_ORG }}"
        DOCKER_INFLUXDB_INIT_BUCKET: "{{ .INFLUXDB_BUCKET }}"
        DOCKER_INFLUXDB_INIT_ADMIN_TOKEN: "{{ .INFLUXDB_TOKEN }}"
  dataFrom:
    - extract:
        key: influxdb
